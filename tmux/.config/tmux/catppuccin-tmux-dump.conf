# Inactive windows
# Active window
set -g window-status-current-format \
  "#{@win_sep_left}#[fg=colour0,bg=colour13] #I #{@win_sep_mid}#[fg=colour15,bg=colour13] #T #{@win_sep_right}"
    set -gF window-status-current-format \
      "#{E:@_ctp_w_number_style}#{E:@catppuccin_window_current_left_separator}#{@catppuccin_window_current_number}"
    set -agF window-status-current-format "#{E:@catppuccin_window_current_middle_separator}"
    set -agF window-status-current-format \
      "#{E:@_ctp_w_text_style}#{@catppuccin_window_current_text}#{@_ctp_w_flags}#{E:@catppuccin_window_current_right_separator}"
  set -g @_ctp_w_number_style "#[fg=#{@thm_crust},bg=#{@catppuccin_window_number_color}]"
  set -g @_ctp_w_text_style "#[fg=#{@thm_fg},bg=#{@catppuccin_window_text_color}]"
  %if "#{==:#{@catppuccin_window_number_position},left}"
    set -gF window-status-format \
      "#{E:@_ctp_w_number_style}#{E:@catppuccin_window_left_separator}#{@catppuccin_window_number}"
    set -agF window-status-format "#{E:@catppuccin_window_middle_separator}"
    set -agF window-status-format \
      "#{E:@_ctp_w_text_style}#{@catppuccin_window_text}#{@_ctp_w_flags}#{E:@catppuccin_window_right_separator}"
  %else
    set -gF window-status-format \
      "#{E:@_ctp_w_text_style}#{E:@catppuccin_window_left_separator}#{E:@_ctp_w_text_style}#{@catppuccin_window_text}#{@_ctp_w_flags}"
    set -agF window-status-format "#{E:@catppuccin_window_middle_separator}"
    set -agF window-status-format \
      "#{E:@_ctp_w_number_style} #{@catppuccin_window_number}#{E:@catppuccin_window_right_separator}"
  %endif

  # =======================================
  # And do the same for the current window.
  # =======================================

  set -g @_ctp_w_number_style "#[fg=#{@thm_crust},bg=#{@catppuccin_window_current_number_color}]"
  set -g @_ctp_w_text_style "#[fg=#{@thm_fg},bg=#{@catppuccin_window_current_text_color}]"
  %if "#{==:#{@catppuccin_window_number_position},left}"
    set -gF window-status-current-format \
      "#{E:@_ctp_w_number_style}#{E:@catppuccin_window_current_left_separator}#{@catppuccin_window_current_number}"
    set -agF window-status-current-format "#{E:@catppuccin_window_current_middle_separator}"
    set -agF window-status-current-format \
      "#{E:@_ctp_w_text_style}#{@catppuccin_window_current_text}#{@_ctp_w_flags}#{E:@catppuccin_window_current_right_separator}"





# --> catppuccin_options_tmux.conf {{{2

# All options and their defaults.
#
# This is executed separately to the main configuration
# so that options are set before parsing the rest of the config.

set -ogq @catppuccin_menu_selected_style "fg=#{@thm_fg},bold,bg=#{@thm_overlay_0}"

# Pane styling options (DO NOT USE -o IN YOUR OWN CONFIGURATION)
set -ogq @catppuccin_pane_status_enabled "no" # set to "yes" to enable
set -ogq @catppuccin_pane_border_status "off" # set to "yes" to enable
set -ogq @catppuccin_pane_border_style "fg=#{@thm_overlay_0}"
set -ogq @catppuccin_pane_active_border_style "##{?pane_in_mode,fg=#{@thm_lavender},##{?pane_synchronized,fg=#{@thm_mauve},fg=#{@thm_lavender}}}"
set -ogq @catppuccin_pane_left_separator "█"
set -ogq @catppuccin_pane_middle_separator "█"
set -ogq @catppuccin_pane_right_separator "█"
set -ogq @catppuccin_pane_color "#{@thm_green}"
set -ogq @catppuccin_pane_background_color "#{@thm_surface_0}"
set -ogq @catppuccin_pane_default_text "##{b:pane_current_path}"
set -ogq @catppuccin_pane_default_fill "number"
set -ogq @catppuccin_pane_number_position "left" # right, left

# NOTE: Changes to make the option names more intuitive and more closely follow
# the tmux naming conventions.
# @catppuccin_window_current_background -> @catppuccin_window_current_number_color
# @catppuccin_window_current_color      -> @catppuccin_window_current_text_color
# @catppuccin_window_default_background -> @catppuccin_window_number_color
# @catppuccin_window_default_color      -> @catppuccin_window_text_color
# @catppuccin_window_status             -> @catppuccin_window_flags
#
# Removed:
# @catppuccin_window_default_fill, @catppuccin_window_current_fill
# Just set the number and text colors.

# Window options (DO NOT USE -o IN YOUR OWN CONFIGURATION)
set -ogq @catppuccin_window_status_style "basic" # basic, rounded, slanted, custom, or none
set -ogq @catppuccin_window_text_color "#{@thm_surface_0}"
set -ogq @catppuccin_window_number_color "#{@thm_overlay_2}"
set -ogq @catppuccin_window_text " #T"
set -ogq @catppuccin_window_number "#I"
set -ogq @catppuccin_window_current_text_color "#{@thm_surface_1}"
set -ogq @catppuccin_window_current_number_color "#{@thm_mauve}"
set -ogq @catppuccin_window_current_text " #T"
set -ogq @catppuccin_window_current_number "#I"
set -ogq @catppuccin_window_number_position "left"

# Window flags
set -ogq @catppuccin_window_flags "none"
set -ogq @catppuccin_window_flags_icon_last " 󰖰" # -
set -ogq @catppuccin_window_flags_icon_current " 󰖯" # *
set -ogq @catppuccin_window_flags_icon_zoom " 󰁌" # Z
set -ogq @catppuccin_window_flags_icon_mark " 󰃀" # M
set -ogq @catppuccin_window_flags_icon_silent " 󰂛" # ~
set -ogq @catppuccin_window_flags_icon_activity " 󱅫" # #
set -ogq @catppuccin_window_flags_icon_bell " 󰂞" # !
# Matches icon order when using `#F` (`#!~[*-]MZ`)
set -ogq @catppuccin_window_flags_icon_format "##{?window_activity_flag,#{E:@catppuccin_window_flags_icon_activity},}##{?window_bell_flag,#{E:@catppuccin_window_flags_icon_bell},}##{?window_silence_flag,#{E:@catppuccin_window_flags_icon_silent},}##{?window_active,#{E:@catppuccin_window_flags_icon_current},}##{?window_last_flag,#{E:@catppuccin_window_flags_icon_last},}##{?window_marked_flag,#{E:@catppuccin_window_flags_icon_mark},}##{?window_zoomed_flag,#{E:@catppuccin_window_flags_icon_zoom},} "


# Maintain backwards compatibility. Use @catppuccin_status_module_bg_color if it is set.
set -ogq @catppuccin_status_module_text_bg "#{?@catppuccin_status_module_bg_color,#{E:@catppuccin_status_module_bg_color},#{@thm_surface_0}}"

# --> catppuccin_tmux.conf{{{2
source -F "#{d:current_file}/themes/catppuccin_#{@catppuccin_flavor}_tmux.conf"

%if "#{==:#{@catppuccin_status_background},default}"
  set -gF @_ctp_status_bg "#{@thm_mantle}"
  set -gF status-style "bg=#{@_ctp_status_bg},fg=#{@thm_fg}"

  %hidden CTP_MESSAGE_BACKGROUND="#{@thm_overlay_0}"
%elif "#{==:#{@catppuccin_status_background},none}"
  set -g status-style "default"
  set -g @_ctp_status_bg "none"

  %hidden CTP_MESSAGE_BACKGROUND="default"
%else
  # Treat @catppuccin_status_background as a format string.
  set -gF status-style "bg=#{E:@catppuccin_status_background},fg=#{@thm_fg}"
  set -gF @_ctp_status_bg "#{E:@catppuccin_status_background}"

  %hidden CTP_MESSAGE_BACKGROUND="#{E:@catppuccin_status_background}"
%endif

# messages
set -gF message-style "fg=#{@thm_teal},bg=$CTP_MESSAGE_BACKGROUND,align=centre"
set -gF message-command-style "fg=#{@thm_teal},bg=$CTP_MESSAGE_BACKGROUND,align=centre"

# menu
%if "#{>=:#{version},3.4}"
  set -gF menu-selected-style "#{E:@catppuccin_menu_selected_style}"
%endif

# panes
set -wgF pane-active-border-style "#{E:@catppuccin_pane_active_border_style}"
set -wgF pane-border-style "#{E:@catppuccin_pane_border_style}"

%if "#{==:#{@catppuccin_pane_status_enabled},yes}"
  # "internal" variables are kept as @_ctp_p_.*
  # and then unset at the end.
  set -gq @_ctp_p_left "" # the content on the left, usually a separator
  set -gq @_ctp_p_middle ""
  set -gq @_ctp_p_right ""
  set -gq @_ctp_p_number ""
  set -gq @_ctp_p_text ""

  %if "#{==:#{@catppuccin_pane_default_fill},none}"
    set -g @_ctp_p_left \
      "#[fg=#{@thm_surface_0},bg=default]#{@catppuccin_pane_left_separator}"
    set -g @_ctp_p_middle \
      "#[fg=#{@thm_fg},bg=#{@thm_surface_0}]#{@catppuccin_pane_middle_separator}"
    set -g @_ctp_p_right \
      "#[fg=#{@thm_surface_0},bg=default]#{@catppuccin_pane_right_separator}"

    set -g @_ctp_p_number \
      "#[fg=#{@thm_fg},bg=#{@thm_surface_0}]##{pane_index}"
    set -g @_ctp_p_text \
      "#[fg=#{@thm_fg},bg=#{@thm_surface_0}]#{E:@catppuccin_pane_default_text}"

  %elif "#{==:#{@catppuccin_pane_default_fill},all}"

    set -g @_ctp_p_left \
      "#[fg=#{E:@catppuccin_pane_color},bg=default]#{@catppuccin_pane_left_separator}"
    set -g @_ctp_p_middle \
      "#[fg=#{E:@catppuccin_pane_color},bg=#{E:@catppuccin_pane_background_color}]#{@catppuccin_pane_middle_separator}"
    set -g @_ctp_p_right \
      "#[fg=#{E:@catppuccin_pane_color},bg=default]#{@catppuccin_pane_right_separator}"

    set -g @_ctp_p_number \
      "#[fg=#{E:@catppuccin_pane_background_color},bg=#{E:@catppuccin_pane_color}]##{pane_index}"
    set -g @_ctp_p_text \
      "#[fg=#{E:@catppuccin_pane_background_color},bg=#{E:@catppuccin_pane_color}]#{E:@catppuccin_pane_default_text}"

  %elif "#{==:#{@catppuccin_pane_default_fill},number}"

    %if "#{==:#{@catppuccin_pane_number_position},left}"
      set -g @_ctp_p_left \
        "#[fg=#{E:@catppuccin_pane_color},bg=default]#{@catppuccin_pane_left_separator}"
      set -g @_ctp_p_right \
        "#[fg=#{E:@catppuccin_pane_background_color},bg=default]#{@catppuccin_pane_right_separator}"
    %else
      set -g @_ctp_p_left \
        "#[fg=#{E:@catppuccin_pane_background_color},bg=default]#{@catppuccin_pane_left_separator}"
      set -g @_ctp_p_right \
        "#[fg=#{E:@catppuccin_pane_color},bg=default]#{@catppuccin_pane_right_separator}"
    %endif

    set -g @_ctp_p_middle \
      "#[fg=#{E:@catppuccin_pane_color},bg=#{E:@catppuccin_pane_background_color}]#{@catppuccin_pane_middle_separator}"

    set -g @_ctp_p_number \
      "#[fg=#{E:@catppuccin_pane_background_color},bg=#{E:@catppuccin_pane_color}]##{pane_index}"
    set -g @_ctp_p_text \
      "#[fg=#{E:@catppuccin_pane_color},bg=#{E:@catppuccin_pane_background_color}]#{E:@catppuccin_pane_default_text}"

  %endif

  %if "#{==:#{@catppuccin_pane_number_position},left}"
    set -wgF pane-border-format \
      "#{E:@_ctp_p_left}#{E:@_ctp_p_number}#{E:@_ctp_p_middle} #{E:@_ctp_p_text}#{E:@_ctp_p_right}"
  %else
    set -wgF pane-border-format \
      "#{E:@_ctp_p_left}#{E:@_ctp_p_text} #{E:@_ctp_p_middle}#{E:@_ctp_p_number}#{E:@_ctp_p_right}"
  %endif

  set -ug @_ctp_p_left
  set -ug @_ctp_p_middle
  set -ug @_ctp_p_right
  set -ug @_ctp_p_number
  set -ug @_ctp_p_text
%endif

# popups
%if "#{>=:#{version},3.4}"
  set -gF popup-style "bg=#{@thm_bg},fg=#{@thm_fg}"
  set -gF popup-border-style "fg=#{@thm_surface_1}"
%endif

# DO NOT USE -o IN YOUR OWN CONFIGURATION
set -ogqF @catppuccin_window_current_left_separator "#{@catppuccin_window_left_separator}"
set -ogqF @catppuccin_window_current_middle_separator "#{@catppuccin_window_middle_separator}"
set -ogqF @catppuccin_window_current_right_separator "#{@catppuccin_window_right_separator}"

# window status
%if "#{!=:#{@catppuccin_window_status_style},none}"
  set -gF window-status-activity-style "bg=#{@thm_lavender},fg=#{@thm_crust}"
  set -gF window-status-bell-style "bg=#{@thm_yellow},fg=#{@thm_crust}"

   %if "#{==:#{@catppuccin_window_flags},icon}"
    set -gqF @_ctp_w_flags "#{E:@catppuccin_window_flags_icon_format}"
  %elif "#{==:#{@catppuccin_window_flags},text}"
    set -gq @_ctp_w_flags "#F"
  %else
    set -gq @_ctp_w_flags ""
  %endif

  %else
    set -gF window-status-current-format \
      "#{E:@_ctp_w_text_style}#{E:@catppuccin_window_current_left_separator}#{E:@_ctp_w_text_style}#{@catppuccin_window_current_text}#{@_ctp_w_flags}"
    set -agF window-status-current-format "#{E:@catppuccin_window_current_middle_separator}"
    set -agF window-status-current-format \
      "#{E:@_ctp_w_number_style} #{@catppuccin_window_current_number}#{E:@catppuccin_window_current_right_separator}"
  %endif


  # Cleanup (unset) all of the internal variables.
  set -ug @_ctp_w_number_style
  set -ug @_ctp_w_text_style
  set -ug @_ctp_w_flags
%endif

# Mode style. This is used for copy mode highlighting to style the current selection.
set -gF mode-style "bg=#{@thm_surface_0},bold"
set -gF clock-mode-colour "#{@thm_blue}"

# --> status_module.conf {{{2
# vim:set ft=tmux:

# Embedded style that ensures that modules look "connected"
# when required.
set -gqF @_ctp_connect_style \
  "#{?#{==:#{@catppuccin_status_connect_separator},yes},,#[bg=default]}"

# There are four colors involved:
#
# - Icon
#   - fg: @catppuccin_status_[module]_icon_fg [default = crust]
#   - bg: @catppuccin_status_[module]_icon_bg [required]
# - Text
#   - fg: @catppuccin_status_[module]_text_fg [default = foreground]
#   - bg: @catppuccin_status_[module]_text_bg [default = @catppuccin_status_module_text_bg]

set -ogqF "@catppuccin_status_${MODULE_NAME}_icon_fg" "#{E:@thm_crust}"
set -ogqF "@catppuccin_status_${MODULE_NAME}_text_fg" "#{E:@thm_fg}"

%if "#{==:#{@catppuccin_status_${MODULE_NAME}_icon_bg},}"
  set -gqF "@catppuccin_status_${MODULE_NAME}_icon_bg" "#{@catppuccin_${MODULE_NAME}_color}"
%endif

%if "#{==:#{@catppuccin_status_${MODULE_NAME}_text_bg},}"
  set -gqF @_ctp_module_text_bg "#{E:@catppuccin_status_module_text_bg}"
%else
  set -gqF @_ctp_module_text_bg "#{@catppuccin_status_${MODULE_NAME}_text_bg}"
%endif

set -gF "@catppuccin_status_${MODULE_NAME}" \
  "#[fg=#{@catppuccin_status_${MODULE_NAME}_icon_bg}]#{@_ctp_connect_style}#{@catppuccin_status_left_separator}"

set -agF "@catppuccin_status_${MODULE_NAME}" \
  "#[fg=#{@catppuccin_status_${MODULE_NAME}_icon_fg},bg=#{@catppuccin_status_${MODULE_NAME}_icon_bg}]#{@catppuccin_${MODULE_NAME}_icon}"

set -agF "@catppuccin_status_${MODULE_NAME}" \
  "#{@catppuccin_status_middle_separator}"

set -agF "@catppuccin_status_${MODULE_NAME}" \
  "#[fg=#{@catppuccin_status_${MODULE_NAME}_text_fg},bg=#{@_ctp_module_text_bg}]"

set -ag "@catppuccin_status_${MODULE_NAME}" "#{E:@catppuccin_${MODULE_NAME}_text}"

set -agF "@catppuccin_status_${MODULE_NAME}" "#[fg=#{@_ctp_module_text_bg}]#{@_ctp_connect_style}#{@catppuccin_status_right_separator}"

set -ug @_ctp_connect_style
set -ug @_ctp_module_text_bg



# vim:ft=tmux:
# --> Catppuccin (Cyberdream){{{2
set -ogq @thm_bg "#3c4048"
set -ogq @thm_fg "#ffffff"

# Colors
set -ogq @thm_rosewater "#ff5ea0"
set -ogq @thm_flamingo "#ff5ea0"
set -ogq @thm_pink "#ff5ef1"
set -ogq @thm_mauve "#bd5eff"
set -ogq @thm_red "#ff6e5e"
set -ogq @thm_maroon "#ff6e5e"
set -ogq @thm_peach "#ffbd5e"
set -ogq @thm_yellow "#f1ff5e"
set -ogq @thm_green "#5eff6c"
set -ogq @thm_teal "#5ef1ff"
set -ogq @thm_sky "#5ef1ff"
set -ogq @thm_sapphire "#5ef1ff"
set -ogq @thm_blue "#5ea1ff"
set -ogq @thm_lavender "#bd5eff"

# Surfaces and overlays
set -ogq @thm_subtext_1 "#7b8496"
set -ogq @thm_subtext_0 "#7b8496"
set -ogq @thm_overlay_2 "#7b8496"
set -ogq @thm_overlay_1 "#7b8496"
set -ogq @thm_overlay_0 "#3c4048"
set -ogq @thm_surface_2 "#3c4048"
set -ogq @thm_surface_1 "#1e2124"
set -ogq @thm_surface_0 "#1e2124"
set -ogq @thm_mantle "#16181a"
set -ogq @thm_crust "#16181a"
set -g @thm_bg        "#16181a"
set -g @thm_fg        "#ffffff"
#}}}
